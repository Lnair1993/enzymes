#!/bin/bash

N_TRIALS=$1
ROOT_PATH="$HOME/.gazebo/gazebo_models/hammering_training"
TRAINING_FOLDER='testing'
TOOL_FOLDER='hammer_training'
START_TRIAL='start_trial'
END_TRIAL='end_trial'
GAZEBO_WORLD_FILE='hammering.world'
OUTPUT_FILE='output_training.txt'

cd "$ROOT_PATH"
rm $OUTPUT_FILE
echo $N_TRIALS >> $OUTPUT_FILE	
for P in `ls -vd $TRAINING_FOLDER/*`;
do 
	rm -r $TOOL_FOLDER	
	echo $P
	cp -r $P $TOOL_FOLDER
	echo $START_TRIAL >> $OUTPUT_FILE
	for (( i=1; i<=$N_TRIALS; i++ ))
	do	
		echo $i	
		gzserver $GAZEBO_WORLD_FILE >> $OUTPUT_FILE	
	done
	echo $END_TRIAL >> $OUTPUT_FILE		
done
rm -r $TOOL_FOLDER
